# Linux系统编程第四章：文件IO

## 1. 核心概念
- **文件描述符**  
  ```c
  fd=open("startup",O_CREAT|O_WRONLY,0222);
  0444 是文件权限的数字表示法。数字从左到右依次对应特殊权限、所有者权限、所属组权限、其他用户权限。
  第一个 0 表示无特殊权限。后面三个 4 分别表示所有者、所属组、其他用户仅有读权限（读权限数值为 4，写为 2，执行 为 1）。
  `mode_t`整数类型
  ```

## 2. 关键问题
| 问题                  | 解决方法              |
|-----------------------|---------------------|
| 如何保证写入原子性？   | 使用`O_APPEND`标志   |
| <sys/stat.h>        |此头文件定义了和文件状态有关的结构体与函数，它为 open 函数提供了文件权限设置所需的常量和类型定义。|
| <fcntl.h>           |声明了 open、fcntl 等函数;定义了众多用于 open 函数的标志常量，例如 O_RDONLY（只读模式）。|
| <stdio.h>           |标准输入输出库的头文件;在代码中，perror 函数就依赖这个头文件，它会把错误信息输出到标准错误输出流。|
| <stdlib.h>          |声明了 exit、malloc、free等函数，定义了一些常用的类型，如 size_t。|
| <unistd.h>          |声明了 close、read、write等函数。定义了一些和系统调用相关的常量，例如 STDIN_FILENO（标准输入文件描述符）|

## 3. 我的疑问
- [ ] `O_SYNC`对加密狗性能的影响？
- [ ] `errExit`如何实现？